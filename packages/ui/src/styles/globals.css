@tailwind base;
@tailwind components;
@tailwind utilities;

/*
 * AINexSuite Design System
 * ========================
 * Zinc-influenced light/dark mode inspired by Linear, Vercel, and GitHub.
 * See packages/ui/docs/DESIGN_SYSTEM.md for full documentation.
 *
 * Key principles:
 * - Inverted zinc scales between light/dark modes
 * - Semantic functional tokens over raw color values
 * - Dynamic app accent colors on neutral canvas
 */

@layer base {
  :root {
    color-scheme: light;

    /*
     * ZINC BASE SCALE (Reference only - use functional tokens)
     * --------------------------------------------------------
     * zinc-50:  #fafafa  |  zinc-500: #71717a  |  zinc-900: #18181b
     * zinc-100: #f4f4f5  |  zinc-600: #52525b  |  zinc-950: #09090b
     * zinc-200: #e4e4e7  |  zinc-700: #3f3f46
     * zinc-300: #d4d4d8  |  zinc-800: #27272a
     * zinc-400: #a1a1aa
     */

    /* shadcn/ui HSL variables - Light Mode (zinc-based) */
    --background: 0 0% 100%;           /* white */
    --foreground: 240 6% 10%;          /* zinc-900 */
    --card: 0 0% 100%;                 /* white */
    --card-foreground: 240 6% 10%;     /* zinc-900 */
    --popover: 0 0% 100%;              /* white */
    --popover-foreground: 240 6% 10%;  /* zinc-900 */
    --primary: 240 6% 10%;             /* zinc-900 - dark button */
    --primary-foreground: 0 0% 98%;    /* zinc-50 - light text on dark */
    --secondary: 240 5% 96%;           /* zinc-100 */
    --secondary-foreground: 240 6% 10%; /* zinc-900 */
    --muted: 0 0% 98%;                 /* zinc-50 */
    --muted-foreground: 240 4% 46%;    /* zinc-500 */
    --accent: 240 5% 96%;              /* zinc-100 */
    --accent-foreground: 240 6% 10%;   /* zinc-900 */
    --destructive: 0 84% 60%;          /* red-500 */
    --destructive-foreground: 0 0% 98%;
    --border: 240 6% 90%;              /* zinc-200 */
    --input: 240 6% 90%;               /* zinc-200 */
    --ring: 240 6% 10%;                /* zinc-900 */
    --radius: 0.5rem;

    /* App-specific accent (default) */
    --app-primary: 24 95% 53%;
    --app-primary-foreground: 0 0% 100%;
    --app-secondary: 330 81% 60%;
    --app-secondary-foreground: 0 0% 100%;

    /* Typography tokens - Font families */
    --font-plus-jakarta-sans: 'Plus Jakarta Sans', system-ui, sans-serif;
    --font-inter: 'Inter', system-ui, sans-serif;
    --font-geist: 'Geist Sans', system-ui, sans-serif;
    --font-dm-sans: 'DM Sans', system-ui, sans-serif;
    --font-system: -apple-system, BlinkMacSystemFont, 'SF Pro Display', 'Segoe UI', system-ui, sans-serif;

    /* Active primary font (defaults to Plus Jakarta Sans) */
    --font-primary: var(--font-plus-jakarta-sans);

    /* Monospace and brand fonts */
    --font-geist-mono: 'Geist Mono', 'SFMono-Regular', ui-monospace, monospace;
    --font-kanit: 'Kanit', system-ui, sans-serif;

    /* Container & layout */
    --container-max-width-xs: 100%;
    --container-max-width-sm: 720px;
    --container-max-width-md: 960px;
    --container-max-width-lg: 1184px;
    --container-max-width-xl: 1280px;
    --container-max-width-2xl: 1440px;
    --container-max-width-3xl: 1600px;

    --app-shell-max-width-xs: 100%;
    --app-shell-max-width-sm: 560px;
    --app-shell-max-width-md: 720px;
    --app-shell-max-width-lg: 820px;
    --app-shell-max-width-xl: 880px;
    --app-shell-wide-max-width-sm: 700px;
    --app-shell-wide-max-width-md: 1120px;
    --app-shell-wide-max-width-lg: 1280px;
    --app-shell-wide-max-width-xl: 1440px;

    --note-board-max-width-sm: 520px;
    --note-board-max-width-md: 720px;
    --note-board-max-width-lg: 1024px;
    --note-board-max-width-xl: 1200px;

    --app-shell-grid-gap: 1.5rem;
    --app-shell-utility-width: 320px;
    --app-shell-inspector-width: clamp(260px, 24vw, 340px);

    /* Surfaces (RGB for opacity control) */
    --color-surface-base: 20 20 22;
    --color-surface-muted: 28 28 31;
    --color-surface-elevated: 36 36 40;
    --color-surface-card: 36 36 40;
    --color-surface-hover: 42 42 45;
    --color-surface-overlay: 10 10 12;

    /* Borders */
    --color-outline-subtle: 50 50 54;
    --color-outline-base: 50 50 54;
    --color-outline-strong: 249 115 22;

    /* Ink scale */
    --color-ink-50: 12 12 12;
    --color-ink-100: 24 24 24;
    --color-ink-200: 45 45 45;
    --color-ink-300: 72 72 78;
    --color-ink-400: 110 110 120;
    --color-ink-500: 158 158 170;
    --color-ink-600: 196 196 208;
    --color-ink-700: 222 222 230;
    --color-ink-800: 240 240 245;
    --color-ink-900: 247 247 250;

    /* Accent scale (orange) */
    --color-accent-50: 255 247 237;
    --color-accent-100: 255 237 213;
    --color-accent-200: 254 215 170;
    --color-accent-300: 253 186 116;
    --color-accent-400: 251 146 60;
    --color-accent-500: 249 115 22;
    --color-accent-600: 234 88 12;
    --color-accent-700: 194 65 12;
    --color-accent-800: 154 52 18;
    --color-accent-900: 124 45 18;

    /* Semantic colors */
    --color-success: 34 197 94;
    --color-warning: 250 204 21;
    --color-danger: 239 68 68;

    /* Radii & shadows */
    --radius-sm: 8px;
    --radius-md: 12px;
    --radius-lg: 18px;
    --radius-xl: 24px;

    --shadow-sm: 0 4px 20px rgba(10, 10, 15, 0.18);
    --shadow-md: 0 10px 40px rgba(10, 10, 15, 0.22);
    --shadow-lg: 0 20px 60px rgba(10, 10, 15, 0.28);

    --transition-base: 160ms ease;

    /* Legacy aliases for backwards compatibility */
    --surface-base: rgb(var(--color-surface-base));
    --surface-muted: rgb(var(--color-surface-muted));
    --surface-elevated: rgb(var(--color-surface-elevated));
    --surface-card: rgb(var(--color-surface-card));
    --surface-hover: rgb(var(--color-surface-hover));
    --surface-overlay: rgba(var(--color-surface-overlay) / 0.85);

    --outline-subtle: rgba(var(--color-outline-subtle) / 1);
    --outline-base: rgba(var(--color-outline-base) / 1);
    --outline-strong: rgba(var(--color-outline-strong) / 1);

    --ink-400: rgb(var(--color-ink-400));
    --ink-500: rgb(var(--color-ink-500));
    --ink-600: rgb(var(--color-ink-600));
    --ink-700: rgb(var(--color-ink-700));
    --ink-800: rgb(var(--color-ink-800));
    --ink-900: rgb(var(--color-ink-900));

    --accent-400: rgb(var(--color-accent-400));
    --accent-500: rgb(var(--color-accent-500));
    --accent-600: rgb(var(--color-accent-600));
    --accent-700: rgb(var(--color-accent-700));

    --success-500: rgb(var(--color-success));
    --warning-500: rgb(var(--color-warning));
    --danger-500: rgb(var(--color-danger));
  }

  .dark {
    color-scheme: dark;

    /* shadcn/ui HSL variables - Dark Mode (zinc-based, INVERTED) */
    --background: 240 10% 4%;          /* zinc-950 */
    --foreground: 0 0% 98%;            /* zinc-50 */
    --card: 240 6% 10%;                /* zinc-900 */
    --card-foreground: 0 0% 98%;       /* zinc-50 */
    --popover: 240 6% 10%;             /* zinc-900 */
    --popover-foreground: 0 0% 98%;    /* zinc-50 */
    --primary: 0 0% 98%;               /* zinc-50 - light button */
    --primary-foreground: 240 6% 10%;  /* zinc-900 - dark text on light */
    --secondary: 240 4% 16%;           /* zinc-800 */
    --secondary-foreground: 0 0% 98%;  /* zinc-50 */
    --muted: 240 6% 10%;               /* zinc-900 */
    --muted-foreground: 240 4% 66%;    /* zinc-400 */
    --accent: 240 4% 16%;              /* zinc-800 */
    --accent-foreground: 0 0% 98%;     /* zinc-50 */
    --destructive: 0 63% 31%;          /* red-900 */
    --destructive-foreground: 0 0% 98%;
    --border: 240 4% 16%;              /* zinc-800 */
    --input: 240 4% 16%;               /* zinc-800 */
    --ring: 240 5% 84%;                /* zinc-300 */

    /* App accent colors (same hue, adjusted for dark mode) */
    --app-primary: 24 94% 53%;
    --app-primary-foreground: 0 0% 100%;
    --app-secondary: 330 76% 60%;
    --app-secondary-foreground: 0 0% 100%;

    --color-surface-base: 20 20 22;
    --color-surface-muted: 28 28 31;
    --color-surface-elevated: 36 36 40;
    --color-surface-card: 36 36 40;
    --color-surface-hover: 42 42 45;
    --color-surface-overlay: 10 10 12;

    --color-outline-subtle: 50 50 54;
    --color-outline-base: 50 50 54;
    --color-outline-strong: 249 115 22;

    --color-ink-50: 12 12 12;
    --color-ink-100: 24 24 24;
    --color-ink-200: 45 45 45;
    --color-ink-300: 72 72 78;
    --color-ink-400: 110 110 120;
    --color-ink-500: 158 158 170;
    --color-ink-600: 196 196 208;
    --color-ink-700: 222 222 230;
    --color-ink-800: 240 240 245;
    --color-ink-900: 247 247 250;

    --shadow-sm: 0 4px 20px rgba(10, 10, 15, 0.18);
    --shadow-md: 0 10px 40px rgba(10, 10, 15, 0.22);
    --shadow-lg: 0 20px 60px rgba(10, 10, 15, 0.28);

    /* Legacy aliases */
    --surface-base: rgb(var(--color-surface-base));
    --surface-muted: rgb(var(--color-surface-muted));
    --surface-elevated: rgb(var(--color-surface-elevated));
    --surface-card: rgb(var(--color-surface-card));
    --surface-hover: rgb(var(--color-surface-hover));
    --surface-overlay: rgba(var(--color-surface-overlay) / 0.85);

    --outline-subtle: rgba(var(--color-outline-subtle) / 1);
    --outline-base: rgba(var(--color-outline-base) / 1);
    --outline-strong: rgba(var(--color-outline-strong) / 1);

    --ink-400: rgb(var(--color-ink-400));
    --ink-500: rgb(var(--color-ink-500));
    --ink-600: rgb(var(--color-ink-600));
    --ink-700: rgb(var(--color-ink-700));
    --ink-800: rgb(var(--color-ink-800));
    --ink-900: rgb(var(--color-ink-900));
  }

  /* Light mode - applied by next-themes via class="light" */
  .light,
  .theme-light {
    color-scheme: light;

    /*
     * LIGHT MODE - Zinc Scale Mapping
     * --------------------------------
     * bg-default:    white      (pure white)
     * bg-muted:      zinc-50    (#fafafa)
     * bg-subtle:     zinc-100   (#f4f4f5)
     * border:        zinc-200   (#e4e4e7)
     * border-strong: zinc-300   (#d4d4d8)
     * text-muted:    zinc-500   (#71717a)
     * text-default:  zinc-900   (#18181b)
     */

    --background: 0 0% 100%;           /* white */
    --foreground: 240 6% 10%;          /* zinc-900 */
    --card: 0 0% 100%;                 /* white */
    --card-foreground: 240 6% 10%;     /* zinc-900 */
    --popover: 0 0% 100%;              /* white */
    --popover-foreground: 240 6% 10%;  /* zinc-900 */
    --primary: 240 6% 10%;             /* zinc-900 - dark button */
    --primary-foreground: 0 0% 98%;    /* zinc-50 - white text */
    --secondary: 240 5% 96%;           /* zinc-100 */
    --secondary-foreground: 240 6% 10%; /* zinc-900 */
    --muted: 0 0% 98%;                 /* zinc-50 */
    --muted-foreground: 240 4% 46%;    /* zinc-500 */
    --accent: 240 5% 96%;              /* zinc-100 */
    --accent-foreground: 240 6% 10%;   /* zinc-900 */
    --destructive: 0 84% 60%;          /* red-500 */
    --destructive-foreground: 0 0% 98%;
    --border: 240 6% 90%;              /* zinc-200 */
    --input: 240 6% 90%;               /* zinc-200 */
    --ring: 240 6% 10%;                /* zinc-900 */

    /* App accent colors for light mode */
    --app-primary: 24 95% 53%;
    --app-primary-foreground: 0 0% 100%;
    --app-secondary: 330 81% 60%;
    --app-secondary-foreground: 0 0% 100%;

    /* Surfaces - Light mode (RGB for opacity control) */
    --color-surface-base: 255 255 255;     /* white */
    --color-surface-muted: 250 250 250;    /* zinc-50 */
    --color-surface-elevated: 255 255 255; /* white */
    --color-surface-card: 255 255 255;     /* white */
    --color-surface-hover: 244 244 245;    /* zinc-100 */
    --color-surface-overlay: 255 255 255;  /* white */

    /* Borders - Light mode (zinc-200, zinc-300) */
    --color-outline-subtle: 228 228 231;   /* zinc-200 */
    --color-outline-base: 212 212 216;     /* zinc-300 */
    --color-outline-strong: 161 161 170;   /* zinc-400 */

    /* Ink scale for light mode - DARK text values */
    --color-ink-50: 250 250 250;           /* zinc-50 (lightest - rarely used) */
    --color-ink-100: 244 244 245;          /* zinc-100 */
    --color-ink-200: 228 228 231;          /* zinc-200 */
    --color-ink-300: 212 212 216;          /* zinc-300 */
    --color-ink-400: 161 161 170;          /* zinc-400 - subtle text */
    --color-ink-500: 113 113 122;          /* zinc-500 - muted text */
    --color-ink-600: 82 82 91;             /* zinc-600 - secondary text */
    --color-ink-700: 63 63 70;             /* zinc-700 */
    --color-ink-800: 39 39 42;             /* zinc-800 */
    --color-ink-900: 24 24 27;             /* zinc-900 - primary text */

    /* Shadows - Light mode (subtle) */
    --shadow-sm: 0 1px 2px rgba(0, 0, 0, 0.04);
    --shadow-md: 0 4px 6px -1px rgba(0, 0, 0, 0.07), 0 2px 4px -1px rgba(0, 0, 0, 0.04);
    --shadow-lg: 0 10px 15px -3px rgba(0, 0, 0, 0.08), 0 4px 6px -2px rgba(0, 0, 0, 0.04);
    --shadow-xl: 0 20px 25px -5px rgba(0, 0, 0, 0.08), 0 10px 10px -5px rgba(0, 0, 0, 0.03);

    /* Legacy aliases */
    --surface-base: rgb(var(--color-surface-base));
    --surface-muted: rgb(var(--color-surface-muted));
    --surface-elevated: rgb(var(--color-surface-elevated));
    --surface-card: rgb(var(--color-surface-card));
    --surface-hover: rgb(var(--color-surface-hover));
    --surface-overlay: rgba(var(--color-surface-overlay) / 0.95);

    --outline-subtle: rgba(var(--color-outline-subtle) / 1);
    --outline-base: rgba(var(--color-outline-base) / 1);
    --outline-strong: rgba(var(--color-outline-strong) / 1);

    --ink-400: rgb(var(--color-ink-400));
    --ink-500: rgb(var(--color-ink-500));
    --ink-600: rgb(var(--color-ink-600));
    --ink-700: rgb(var(--color-ink-700));
    --ink-800: rgb(var(--color-ink-800));
    --ink-900: rgb(var(--color-ink-900));
  }

  * {
    @apply border-border;
  }

  *,
  *::before,
  *::after {
    box-sizing: border-box;
  }

  html,
  body {
    min-height: 100%;
  }

  body {
    @apply bg-background text-foreground;
    margin: 0;
    font-family: var(--font-primary);
    -webkit-font-smoothing: antialiased;
    -moz-osx-font-smoothing: grayscale;
  }

  /* Font preference selectors - applied via data-font attribute on html */
  [data-font="plus-jakarta-sans"] {
    --font-primary: var(--font-plus-jakarta-sans);
  }
  [data-font="inter"] {
    --font-primary: var(--font-inter);
  }
  [data-font="geist"] {
    --font-primary: var(--font-geist);
  }
  [data-font="dm-sans"] {
    --font-primary: var(--font-dm-sans);
  }
  [data-font="system"] {
    --font-primary: var(--font-system);
  }

  a {
    color: inherit;
    text-decoration: none;
  }

  img,
  svg {
    display: block;
    max-width: 100%;
  }

  /* Apply accent color to native form controls */
  input[type='checkbox'],
  input[type='radio'],
  input[type='range'],
  progress {
    accent-color: rgb(var(--color-accent-500));
  }

  ::selection {
    background: rgba(var(--color-accent-500) / 0.25);
    color: rgb(var(--color-ink-900));
  }

  ::-webkit-scrollbar {
    width: 10px;
    height: 10px;
  }

  ::-webkit-scrollbar-track {
    background: rgb(var(--color-surface-elevated));
  }

  ::-webkit-scrollbar-thumb {
    background: rgb(var(--color-surface-muted));
    border-radius: 999px;
  }

  ::-webkit-scrollbar-thumb:hover {
    background: rgb(var(--color-surface-hover));
  }
}

.surface-base {
  background-color: rgb(var(--color-surface-base));
}

.surface-elevated {
  background-color: rgb(var(--color-surface-elevated));
  box-shadow: var(--shadow-sm);
}

.surface-card {
  background-color: rgb(var(--color-surface-card));
  box-shadow: var(--shadow-sm);
}

.surface-muted {
  background-color: rgb(var(--color-surface-muted));
}

.surface-hover {
  background-color: rgb(var(--color-surface-hover));
}

.glass-panel {
  background-color: rgba(var(--color-surface-overlay) / 0.85);
  backdrop-filter: blur(16px);
}

.hover\:surface-card:hover {
  background-color: rgb(var(--color-surface-card));
}

.hover\:surface-hover:hover {
  background-color: rgb(var(--color-surface-hover));
}

.hover\:surface-elevated:hover {
  background-color: rgb(var(--color-surface-elevated));
}

.hover\:surface-muted:hover {
  background-color: rgb(var(--color-surface-muted));
}

.focus-ring,
.focus-visible\:focus-ring:focus-visible {
  outline: none;
  box-shadow: 0 0 0 2px rgba(var(--color-accent-500) / 0.18);
}

.masonry-grid {
  column-count: 1;
  column-gap: 1rem;
}

@media (min-width: 640px) {
  .masonry-grid {
    column-count: 2;
  }
}

@media (min-width: 1024px) {
  .masonry-grid {
    column-count: 3;
  }
}

@media (min-width: 1280px) {
  .masonry-grid {
    column-count: 4;
  }
}

.masonry-item {
  break-inside: avoid;
  margin-bottom: 1rem;
}

.text-balance {
  text-wrap: balance;
}
